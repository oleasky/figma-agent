---
phase: 7-skills-install
plan: 03
type: execute
---

<objective>
Create the installer script and finalize the project with updated CLAUDE.md and cross-verification.

Purpose: Make the skills installable with a single command, update project documentation to reflect completed state, and verify everything works together.
Output: `install.sh` script, updated `CLAUDE.md`, updated skill/knowledge READMEs, verified cross-references.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/7-skills-install/07-01-SUMMARY.md
@.planning/phases/7-skills-install/07-02-SUMMARY.md

# All 6 skill files (created in plans 01 and 02):
@commands/figma/interpret-layout.md
@commands/figma/generate-react.md
@commands/figma/generate-html.md
@commands/figma/extract-tokens.md
@commands/figma/map-payload-block.md
@commands/figma/audit-plugin.md

# Project entry point:
@CLAUDE.md
@commands/figma/README.md
@knowledge/README.md

**Constraining decisions:**
- [Phase 1]: Skill invocation: `/figma:skill-name`
- Claude Code skills install to `~/.claude/skills/{name}/SKILL.md`
- Install script creates symlink directories in `~/.claude/skills/`
- Source files live in `commands/figma/{skill-name}.md`
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create install.sh installer script</name>
  <files>install.sh</files>
  <action>
Create a bash installer script that:

1. Shebang: `#!/usr/bin/env bash`
2. `set -euo pipefail` for safety
3. Determine the script's own directory (SCRIPT_DIR) using `$(cd "$(dirname "$0")" && pwd)` so it works from any location
4. Define the 6 skills to install:
   - figma-interpret-layout → commands/figma/interpret-layout.md
   - figma-generate-react → commands/figma/generate-react.md
   - figma-generate-html → commands/figma/generate-html.md
   - figma-extract-tokens → commands/figma/extract-tokens.md
   - figma-map-payload-block → commands/figma/map-payload-block.md
   - figma-audit-plugin → commands/figma/audit-plugin.md
5. For each skill:
   - Create directory `~/.claude/skills/{name}/` if it doesn't exist
   - Symlink source .md file → `~/.claude/skills/{name}/SKILL.md`
   - If symlink already exists and points to correct target, skip with message
   - If symlink exists but points elsewhere, warn and ask to overwrite (or use --force flag)
   - Print success message for each skill installed
6. Support flags:
   - `--force` — overwrite existing symlinks without prompting
   - `--uninstall` — remove all figma-* skill symlinks and empty directories
   - `--dry-run` — show what would be done without doing it
   - `--help` — usage message
7. After installation, print summary:
   - Number of skills installed
   - How to invoke: `/figma-interpret-layout`, `/figma-generate-react`, etc.
   - Note about /clear before using skills (fresh context)
8. Validate that all source .md files exist before starting installation (fail fast)

Do NOT hardcode paths — derive everything from SCRIPT_DIR.
Make the script executable (note: git add will handle this with chmod later).
  </action>
  <verify>bash install.sh --dry-run shows correct symlink operations without executing them</verify>
  <done>install.sh exists, is executable, handles install/uninstall/dry-run/force, creates correct symlinks from commands/figma/*.md to ~/.claude/skills/figma-*/SKILL.md</done>
</task>

<task type="auto">
  <name>Task 2: Update CLAUDE.md, READMEs, and cross-verify</name>
  <files>CLAUDE.md, commands/figma/README.md, knowledge/README.md</files>
  <action>
Final project documentation update and verification:

1. Update `CLAUDE.md`:
   - Update the Skills table: change "(coming)" to actual invocation commands
   - Update skill command names to match installed names (figma-interpret-layout, etc.)
   - Verify all 19 knowledge modules are listed in the Knowledge Modules table
   - Verify the Installation section matches how install.sh actually works
   - Ensure the Usage section shows correct invocation patterns

2. Update `commands/figma/README.md`:
   - Update from "Planned Skills" to actual skill descriptions
   - Add invocation examples for each skill
   - Document the $ARGUMENTS each skill accepts
   - Update installation instructions to match install.sh

3. Update `knowledge/README.md`:
   - Change "Planned Modules" sections to reflect completed status
   - All 19 modules should be listed as available (not planned)

4. Cross-verification:
   - Verify every knowledge module referenced in skill @references actually exists
   - Verify every skill listed in CLAUDE.md has a corresponding file in commands/figma/
   - Verify install.sh references match actual file names
   - Count total knowledge modules (should be 19) and skills (should be 6)
   - Verify no broken cross-references between knowledge modules

Report any discrepancies found during verification.
  </action>
  <verify>
    grep -c "coming" CLAUDE.md returns 0 (no more "coming" placeholders),
    ls commands/figma/*.md | wc -l returns 7 (6 skills + README),
    ls knowledge/*.md | wc -l returns 20 (19 modules + README)
  </verify>
  <done>CLAUDE.md reflects all 6 installed skills with correct names, all READMEs updated, cross-verification passes with 19 knowledge modules and 6 skills, no broken references</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] install.sh exists and is executable
- [ ] install.sh --dry-run shows correct operations
- [ ] All 6 skill files exist in commands/figma/
- [ ] CLAUDE.md has no "(coming)" placeholders
- [ ] All knowledge module @references in skills resolve to existing files
- [ ] knowledge/README.md lists all 19 modules as complete
- [ ] commands/figma/README.md documents all 6 skills
- [ ] Total: 19 knowledge modules + 6 skills + 1 installer
</verification>

<success_criteria>
- install.sh creates correct symlinks for all 6 skills
- install.sh supports --force, --uninstall, --dry-run, --help
- CLAUDE.md is the authoritative project index with no stale references
- All cross-references verified
- Phase 7 complete — project v1 milestone complete
</success_criteria>

<output>
After completion, create `.planning/phases/7-skills-install/07-03-SUMMARY.md`:

# Phase 7 Plan 3: Installation & Finalization Summary

**[Substantive one-liner]**

## Accomplishments
## Files Created/Modified
## Decisions Made
## Issues Encountered
## Next Step

Phase 7 complete. Milestone v1 (Knowledge Base & Skills) complete.
All 19 knowledge modules and 6 skills delivered.
Ready for /gsd:complete-milestone.
</output>
